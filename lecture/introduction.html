<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Performant Statistical Computing and Algoware Development</title>
    <meta charset="utf-8" />
    <meta name="author" content="Aki Nishimura" />
    <meta name="date" content="2021-04-13" />
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
    <link rel="stylesheet" href="extra.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Performant Statistical Computing and Algoware Development
## where statistical computing, algorithm, and software meets
### Aki Nishimura
### 2021-04-13

---

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
    extensions: ["color.js"],
    Macros: {
      bx: "{\\boldsymbol{x}}",
      by: "{\\boldsymbol{y}}",
      bf: "{\\boldsymbol{f}}",
      bA: "{\\boldsymbol{A}}",
      bdelta: "{\\boldsymbol{\\delta}}",
      bSigma: "{\\boldsymbol{\\Sigma}}",
      given: "{\\, | \\,}",
      eqDistribution: "{\\overset{\\small \\textrm{d}}{=}}",
      iid: "{\\mathbin{\\overset{\\small \\textrm{i.i.d.}}{\\sim}}}",
      normalDist: "{\\mathcal{N}}"
    }
  }
});
</script>

<span style="display: none;">
  $$\newcommand{\bm}[1]{\boldsymbol{#1}}$$
  $$\newcommand{\indep}{\mathrel{\unicode{x2AEB}}}$$
  $$\definecolor{lava}{rgb}{0.81, 0.06, 0.13}$$
</span>



# What's wrong with Statistics

How long does matrix multiplication take in base R


```r
n &lt;- 4096L
A &lt;- matrix(rnorm(n * n), nrow = n, ncol = n)
B &lt;- matrix(rnorm(n * n), nrow = n, ncol = n)
system.time(A %*% B)
```

... as opposed to Anaconda Python?


```python
import numpy as np
n = 4096
A = np.random.randn(n, n)
B = np.random.randn(n, n)
%timeit A.dot(B)
```

---

# What's wrong with Statistics


```r
n_obs &lt;- 5
n_pred &lt;- 3
n_nonzero &lt;- 5
col_index &lt;- c(1, 1, 1, 2, 2, 3)
row_index &lt;- c(1, 3, 5, 2, 4, 1)
sparseMatrix(i = row_index, j = col_index, x = 1)
```

```
## 5 x 3 sparse Matrix of class "dgCMatrix"
##           
## [1,] 1 . 1
## [2,] . 1 .
## [3,] 1 . .
## [4,] . 1 .
## [5,] 1 . .
```

---

# What's wrong with Statistics


```r
n_obs &lt;- 10^6
n_pred &lt;- 10^3
density &lt;- .01
n_nonzero &lt;- as.integer(n_obs * n_pred * density)
```


```r
# Simulate sparse design matrix
row_index &lt;- sample.int(n_obs, n_nonzero, replace = TRUE)
col_index &lt;- sample.int(n_pred, n_nonzero, replace = TRUE)
X &lt;- sparseMatrix(i = row_index, j = col_index, x = 1)
```

--
How much memory to store `\(X\)` in dense format?


```r
memory_req_in_gigabytes &lt;- 8 * n_obs * n_pred / 1024^3
sprintf("Dense storage will require %.2gGB.",  memory_req_in_gigabytes)
```

```
## [1] "Dense storage will require 7.5GB."
```

---

# What's wrong with Statistics


```r
X &lt;- sparseMatrix(i = row_index, j = col_index, x = 1)

# Simulate (completely random) survival time
failure_time &lt;- rexp(n_obs)
censoring_time &lt;- rexp(n_obs)
observed &lt;- rbinom(n_obs, 1, prob = .7)
y &lt;- data.frame(
  time = ifelse(observed, failure_time, censoring_time),
  status = observed
)
y &lt;- as.matrix(y)

glmnet(X, y, family = 'cox') # Older versions throw errors
```

---

# Words from Joel Spolsky, &lt;br&gt; `\(\qquad\)`co-founder of Stack Overflow

.center[
_"Nobody would be surprised if you told them it was hard to do open heart surgery. OK, fine, so maybe software isn't open heart surgery. But it has about the same number of moving parts, it's probably just as complicated, and it's critical in a different way._

_But there's something weird about designing software specifically: Everybody thinks they know how to do it, even when they have no training. They just think, Oh sure, I can do that!"_
]

---
class: middle

# So, what's your point, dude?

--

Software is hard (but thanks Hadley for your help).

--

Computing is hard (who's going to be a Hadley here?)

--

Statisticians don't even know what they don't know.

--

Statisticians' needs left out while soft/hardware evolves.

--

We gotta start changing this.
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"slideNumberFormat": "%current%",
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
